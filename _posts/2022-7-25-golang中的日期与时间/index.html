<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Golang中的日期与时间 | Glow's Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Golang中的日期与时间"><meta property="og:description" content="Golang 的日期及时间 Golang 的日期及时间 Golang提供良好的支持与日期和时间的工作。在 Golang，我们不需要任何第三方软件包来管理时间和日期。Go 标准库的 time 包非常容易理解和实现。
Golang 默认的 time.time 时间类型表示具有纳秒精度的时间瞬间。它是一个没有导出字段的结构，这意味着您永远不需要使用点运算符来访问不同的字段。相反，可以使用各种方法来获得所需的数据。
如何得到当前的系统时间？ 这是最常出现的问题之一。作为开发人员，我们遇到了许多这样的情况，需要获得系统的当前时间。观察下面的代码，了解如何得到当前的系统时间。
package main import ( &#34;fmt&#34; &#34;time&#34; ) func main() { now := time.Now() fmt.Println(&#34;Current time is:&#34;, now) } $ go run current_time.go Current time is: 2021-11-03 20:57:06.294753357 +0530 IST m=+0.000030078 正如我们所知，UTC (Universal Coordinated time)被选为主要的时间标准，它避免了时区、夏时制等的混淆。在 Golang中，我们也可以得到当前系统时间(UTC)。让我们通过示例来了解如何以 UTC 表示当前系统时间。
package main import ( &#34;fmt&#34; &#34;time&#34; ) func main() { now := time.Now().UTC() fmt.Println(&#34;Current time is:&#34;, now) } $ go run current_time."><meta property="og:type" content="article"><meta property="og:url" content="https://glows.github.io/_posts/2022-7-25-golang%E4%B8%AD%E7%9A%84%E6%97%A5%E6%9C%9F%E4%B8%8E%E6%97%B6%E9%97%B4/"><meta property="article:section" content="_posts"><meta property="article:published_time" content="2022-05-01T15:14:40+00:00"><meta property="article:modified_time" content="2022-05-01T15:14:40+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Golang中的日期与时间"><meta name=twitter:description content="Golang 的日期及时间 Golang 的日期及时间 Golang提供良好的支持与日期和时间的工作。在 Golang，我们不需要任何第三方软件包来管理时间和日期。Go 标准库的 time 包非常容易理解和实现。
Golang 默认的 time.time 时间类型表示具有纳秒精度的时间瞬间。它是一个没有导出字段的结构，这意味着您永远不需要使用点运算符来访问不同的字段。相反，可以使用各种方法来获得所需的数据。
如何得到当前的系统时间？ 这是最常出现的问题之一。作为开发人员，我们遇到了许多这样的情况，需要获得系统的当前时间。观察下面的代码，了解如何得到当前的系统时间。
package main import ( &#34;fmt&#34; &#34;time&#34; ) func main() { now := time.Now() fmt.Println(&#34;Current time is:&#34;, now) } $ go run current_time.go Current time is: 2021-11-03 20:57:06.294753357 +0530 IST m=+0.000030078 正如我们所知，UTC (Universal Coordinated time)被选为主要的时间标准，它避免了时区、夏时制等的混淆。在 Golang中，我们也可以得到当前系统时间(UTC)。让我们通过示例来了解如何以 UTC 表示当前系统时间。
package main import ( &#34;fmt&#34; &#34;time&#34; ) func main() { now := time.Now().UTC() fmt.Println(&#34;Current time is:&#34;, now) } $ go run current_time."><link rel=stylesheet href=https://glows.github.io/css/style-white.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://glows.github.io/images/favicon.ico></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><header id=header><a href=https://glows.github.io><div id=logo style=background-image:url(https://glows.github.io/images/logo.png)></div><div id=title><h1>Glow's Blog</h1></div></a><div id=nav><ul><li class=icon><a href=#><i class="fas fa-bars fa-2x"></i></a></li><li><a href=/>Home</a></li><li><a href=/_posts/>Writings</a></li><li><a href=/tags/>Tags</a></li><li><a href=/about>About</a></li></ul></div></header><article class=post itemscope itemtype=http://schema.org/BlogPosting><div class=content itemprop=articleBody><h1 id=golang-的日期及时间>Golang 的日期及时间</h1><p>Golang 的日期及时间
Golang提供良好的支持与日期和时间的工作。在 Golang，我们不需要任何第三方软件包来管理时间和日期。Go 标准库的 <a href=https://golang.org/pkg/time/>time</a> 包非常容易理解和实现。</p><p>Golang 默认的 <a href=https://golang.org/pkg/time/#Time>time.time</a> 时间类型表示具有纳秒精度的时间瞬间。它是一个没有导出字段的结构，这意味着您永远不需要使用点运算符来访问不同的字段。相反，可以使用各种方法来获得所需的数据。</p><h2 id=如何得到当前的系统时间>如何得到当前的系统时间？</h2><p>这是最常出现的问题之一。作为开发人员，我们遇到了许多这样的情况，需要获得系统的当前时间。观察下面的代码，了解如何得到当前的系统时间。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>now</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>()
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Current time is:&#34;</span>, <span style=color:#a6e22e>now</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ go run current_time.go 
</span></span><span style=display:flex><span>Current time is: 2021-11-03 20:57:06.294753357 +0530 IST m<span style=color:#f92672>=</span>+0.000030078
</span></span></code></pre></div><p>正如我们所知，UTC (Universal Coordinated time)被选为主要的时间标准，它避免了时区、夏时制等的混淆。在 Golang中，我们也可以得到当前系统时间(UTC)。让我们通过示例来了解如何以 UTC 表示当前系统时间。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>now</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>().<span style=color:#a6e22e>UTC</span>()
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Current time is:&#34;</span>, <span style=color:#a6e22e>now</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ go run current_time.go
</span></span><span style=display:flex><span>Current time is: 2021-11-03 15:32:48.441669614 +0000 UTC
</span></span></code></pre></div><h2 id=日期和时间>日期和时间</h2><p>我们还可以在 Golang 的 datetime 中访问不同的组件。为了访问年、月、日、小时、分钟和秒，我们可以对时间对象调用不同的函数。让我们通过下面的一个例子来理解。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>now</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Year:&#34;</span>, <span style=color:#a6e22e>now</span>.<span style=color:#a6e22e>Year</span>())
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Month:&#34;</span>, <span style=color:#a6e22e>now</span>.<span style=color:#a6e22e>Month</span>())
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Day:&#34;</span>, <span style=color:#a6e22e>now</span>.<span style=color:#a6e22e>Day</span>())
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Hour:&#34;</span>, <span style=color:#a6e22e>now</span>.<span style=color:#a6e22e>Hour</span>())
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Minute:&#34;</span>, <span style=color:#a6e22e>now</span>.<span style=color:#a6e22e>Minute</span>())
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Second:&#34;</span>, <span style=color:#a6e22e>now</span>.<span style=color:#a6e22e>Second</span>())
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Nanosecond:&#34;</span>, <span style=color:#a6e22e>now</span>.<span style=color:#a6e22e>Nanosecond</span>())
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ go run datetime.go
</span></span><span style=display:flex><span>Year: <span style=color:#ae81ff>2021</span>
</span></span><span style=display:flex><span>Month: November
</span></span><span style=display:flex><span>Day: <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>Hour: <span style=color:#ae81ff>21</span>
</span></span><span style=display:flex><span>Minute: <span style=color:#ae81ff>21</span>
</span></span><span style=display:flex><span>Second: <span style=color:#ae81ff>23</span>
</span></span><span style=display:flex><span>Nanosecond: <span style=color:#ae81ff>806031374</span>
</span></span></code></pre></div><h2 id=golang-的日期函数>Golang 的日期函数</h2><p>我们可以为特定的日期创建一个时间对象。我们可以将年、月、日、小时、分钟、秒、纳秒和位置参数传递给 <strong>time.Date</strong> 函数。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>     <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>     <span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>t</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Date</span>(<span style=color:#ae81ff>2020</span>, <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>November</span>, <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>23</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>UTC</span>)
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;Date-time is set to : %s\n&#34;</span>, <span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Local</span>())
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ go run date_func.go 
</span></span><span style=display:flex><span>Date-time is set to : 2020-11-11 04:30:00 +0530 IST
</span></span></code></pre></div><h2 id=使用-golang-解析和格式化日期时间>使用 Golang 解析和格式化日期时间</h2><p>日期和时间都可以有多种表示形式，Golang 提供了 <strong>parse ()</strong> 函数来对其进行解析。Go 语言中的 <strong>Parse()</strong> 函数用于解析格式化的字符串，然后查找它形成的时间值。让我们观察下面的代码示例。在本例中，我们使用 <strong>parse()</strong> 函数使用布局来解析日期/时间。这个例子取自 Golang 的官方文件。<a href=https://golang.org/pkg/time/#Parse><strong>time.Parse()</strong></a> 函数接受一个时间字符串和一个布局作为输入，并尝试创建一个新的 <strong>time</strong> 对象。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Define the layout as constant
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// Golang parse function will parse the given string in 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// same format as provided in layout.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>longForm</span> = <span style=color:#e6db74>&#34;Jan 2, 2006 at 3:04pm (MST)&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Parse</span>(<span style=color:#a6e22e>longForm</span>, <span style=color:#e6db74>&#34;Feb 3, 2013 at 7:54pm (PST)&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>shortForm</span> = <span style=color:#e6db74>&#34;2006-Jan-02&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>_</span> = <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Parse</span>(<span style=color:#a6e22e>shortForm</span>, <span style=color:#e6db74>&#34;2013-Feb-03&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Some valid layouts are invalid time values, due to format specifiers
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// such as _ for space padding and Z for zone information.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// For example the RFC3339 layout 2006-01-02T15:04:05Z07:00
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// contains both Z and a time zone offset in order to handle both valid options:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 2006-01-02T15:04:05Z
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 2006-01-02T15:04:05+07:00
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>_</span> = <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Parse</span>(<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>RFC3339</span>, <span style=color:#e6db74>&#34;2006-01-02T15:04:05Z&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>t</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>_</span> = <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Parse</span>(<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>RFC3339</span>, <span style=color:#e6db74>&#34;2006-01-02T15:04:05+07:00&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>t</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Parse</span>(<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>RFC3339</span>, <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>RFC3339</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;error&#34;</span>, <span style=color:#a6e22e>err</span>) <span style=color:#75715e>// Returns an error as the layout is not a valid time value
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ go run parse_time.go 
</span></span><span style=display:flex><span>2013-02-03 19:54:00 +0000 PST
</span></span><span style=display:flex><span>2013-02-03 00:00:00 +0000 UTC
</span></span><span style=display:flex><span>2006-01-02 15:04:05 +0000 UTC
</span></span><span style=display:flex><span>2006-01-02 15:04:05 +0700 +0700
</span></span><span style=display:flex><span>error parsing time <span style=color:#e6db74>&#34;2006-01-02T15:04:05Z07:00&#34;</span>: extra text: <span style=color:#e6db74>&#34;07:00&#34;</span>
</span></span></code></pre></div><h2 id=golang-的持续时间>Golang 的持续时间</h2><p>简单地说，持续时间是两个时刻之间经过的时间。技术上，在Golang持续时间表示两个瞬间之间的经过时间，作为一个整数64纳秒计数。这代表将最长的持续时间限制在大约290年。让我们来看一个例子，如何计算方法调用之间的运行时间。观察下面的代码函数 <strong>t1.Sub(t0)</strong> 是用来计算运行时间的。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>expensiveCall</span>() {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>t0</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>()
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>expensiveCall</span>()
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>t1</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>()
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;The call took %v to run.\n&#34;</span>, <span style=color:#a6e22e>t1</span>.<span style=color:#a6e22e>Sub</span>(<span style=color:#a6e22e>t0</span>))
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ go run elapsed.go
</span></span><span style=display:flex><span>The call took 64ns to run.
</span></span></code></pre></div><h2 id=加减和比较时间>加减和比较时间</h2><p>Golang 提供各种功能，可对时间对象执行多种操作。通过这些方法，我们可以添加时间或时间相减，得到两个时间之间的差，并比较两个时间，看看哪个时间在另一个时间之后。让我们通过例子来理解这一点。</p><p>在下面的例子中，我们使用了两个函数: <code>time.Add()</code> 加/减去时间 和 <code>time.AddDate()</code>添加/减去日期。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Adding time
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Adding 5 minutes 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>currentTime</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>().<span style=color:#a6e22e>UTC</span>()
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>inFiveMinutes</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>currentTime</span>.<span style=color:#a6e22e>Add</span>(<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Minute</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Five min in future&#34;</span>, <span style=color:#a6e22e>inFiveMinutes</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 5 minutes ago
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>fiveMinutesAgo</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>currentTime</span>.<span style=color:#a6e22e>Add</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Minute</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Five min in past&#34;</span>, <span style=color:#a6e22e>fiveMinutesAgo</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Adds years, months, and days
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	
</span></span><span style=display:flex><span>	<span style=color:#75715e>// inOneMonth is 1 month in the future
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>inOneMonth</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>currentTime</span>.<span style=color:#a6e22e>AddDate</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>)	
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;One month in future&#34;</span>, <span style=color:#a6e22e>inOneMonth</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>oneDayAgo</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>currentTime</span>.<span style=color:#a6e22e>AddDate</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;One day ago &#34;</span>, <span style=color:#a6e22e>oneDayAgo</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>Five min in future 2021-11-05 05:18:53.982233815 +0000 UTC
</span></span><span style=display:flex><span>Five min in past 2021-11-05 05:08:53.982233815 +0000 UTC
</span></span><span style=display:flex><span>One month in future 2021-12-05 05:13:53.982233815 +0000 UTC
</span></span><span style=display:flex><span>One day ago  2021-11-04 05:13:53.982233815 +0000 UTC
</span></span></code></pre></div><p>现在让我们举一个例子，我们需要得到两个时间实例之间的差。<code> time.Sub()</code> 获取两个时间实例之间的差。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Getting difference between time instances
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>startTime</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Date</span>(<span style=color:#ae81ff>2019</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>UTC</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>endTime</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Date</span>(<span style=color:#ae81ff>2020</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>UTC</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>difference</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>endTime</span>.<span style=color:#a6e22e>Sub</span>(<span style=color:#a6e22e>startTime</span>) 
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;The time difference is = %v\n&#34;</span>, <span style=color:#a6e22e>difference</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ go run time_diff.go 
</span></span><span style=display:flex><span>The time difference is <span style=color:#f92672>=</span> 8760h0m0s
</span></span></code></pre></div><p>现在让我们举一个例子，我们需要找出哪个时间先于其他时间出现, 我们会利用 <strong>time.After()</strong> 函数。这是非常常见的用例，用于需要比较时间的地方。我们还将看看如何检查时间是否相等&ndash;就是使用 <strong>time.Equal()</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>first</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Date</span>(<span style=color:#ae81ff>2022</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>UTC</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>second</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Date</span>(<span style=color:#ae81ff>2021</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>12</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>UTC</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>third</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Date</span>(<span style=color:#ae81ff>2021</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>12</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>UTC</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>isFirstAfter</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>first</span>.<span style=color:#a6e22e>After</span>(<span style=color:#a6e22e>second</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;Is first come after %t\n&#34;</span>,<span style=color:#a6e22e>isFirstAfter</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>isThirdEqualSecond</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>third</span>.<span style=color:#a6e22e>Equal</span>(<span style=color:#a6e22e>second</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;Is third equal second %t\n&#34;</span>,<span style=color:#a6e22e>isThirdEqualSecond</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ go run time_check.go 
</span></span><span style=display:flex><span>Is first come after true
</span></span><span style=display:flex><span>Is third equal second true
</span></span></code></pre></div><h2 id=sleep--time-ticker>Sleep & time ticker</h2><p>在 Golang中，我们可以使用 <strong>time.Sleep()</strong> 暂停代码的执行 。请记住，这是同步的，它会阻塞当前 Go 线程(routine)。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Sleeping for 5 second
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;Current Unix Time: %v\n&#34;</span>, <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>().<span style=color:#a6e22e>Unix</span>())
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Sleep</span>(<span style=color:#ae81ff>5</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Second</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;Current Unix Time: %v\n&#34;</span>, <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>().<span style=color:#a6e22e>Unix</span>())
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ go run sleep_5second.go
</span></span><span style=display:flex><span>Current Unix Time: <span style=color:#ae81ff>1636090412</span>
</span></span><span style=display:flex><span>Current Unix Time: <span style=color:#ae81ff>1636090417</span>
</span></span></code></pre></div><p>Golang ticker 是用来在特定的时间间隔执行代码的。如果我们需要在一个固定的时间间隔内做一些事情(比如说每秒或者每分钟) ，我们可以使用 Golang <strong>time.Ticker()</strong> 函数。举个例子。在下面的代码中，我们每秒钟打印一次语句。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>printSomethingEverySecond</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ticker</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>NewTicker</span>(<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Second</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>ticker</span>.<span style=color:#a6e22e>C</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;Current Unix Time: %v\n&#34;</span>, <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>().<span style=color:#a6e22e>Unix</span>())
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>printSomethingEverySecond</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ go run ticker_demo.go 
</span></span><span style=display:flex><span>Current Unix Time: <span style=color:#ae81ff>1636090736</span>
</span></span><span style=display:flex><span>Current Unix Time: <span style=color:#ae81ff>1636090737</span>
</span></span><span style=display:flex><span>Current Unix Time: <span style=color:#ae81ff>1636090738</span>
</span></span><span style=display:flex><span>Current Unix Time: <span style=color:#ae81ff>1636090739</span>
</span></span><span style=display:flex><span>Current Unix Time: <span style=color:#ae81ff>1636090740</span>
</span></span><span style=display:flex><span>Current Unix Time: <span style=color:#ae81ff>1636090741</span>
</span></span><span style=display:flex><span>Current Unix Time: <span style=color:#ae81ff>1636090742</span>
</span></span><span style=display:flex><span>...
</span></span></code></pre></div></div></article><footer id=footer><div class=footer-left>Copyright &copy; 2022 glows</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/_posts/>Writings</a></li><li><a href=/tags/>Tags</a></li><li><a href=/about>About</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script></html>